{% extends request.resolver_match.app.base_template_name|default:'material/base_site.html' %}
{% load i18n material_form material_site %}

{% block content %}
<div class="mdc-card dmc-form-page">
  <section class="dmc-form-page__header">
    {% block list-header-title %}
    <h1 class="mdc-typography--headline5">
      {% if view.object.pk %}
        {{ view.object }}
      {% else %}
        {% trans 'New' %}
      {% endif %}</h1>
    {% endblock %}
    {% block list-header-subtitle %}
    <h2 class="mdc-typography--subtitle1 dmc-breadcrumbs">
      {% block breadcrumbs_items %}
      <a href="{% viewset_url view.viewset 'list' %}">{{ view.model|verbose_name_plural|title }}</a>
      {% if view.object.pk %}
      {% viewset_url view.viewset 'detail' view.object.pk as detail_url %}
      {% if detail_url  %}
      <a href="{{ detail_url }}">{{ view.object }}</a>
      {% endif %}
      {% endif %}
      <a>{% if view.object.pk %}{% if detail_url %}{% trans 'Change' %}{% else %}{{ view.object }}{% endif %}{% else %}{% trans 'Add' %}{% endif %}</a>
      {% endblock %}
    </h2>
    {% endblock %}
    {% block list-header-menu %}
    <div class="dmc-list__menu">
      {% include 'material/includes/view_action_menu.html' with view=view only %}
    </div>
    {% endblock %}
  </section>

  <form method="POST" data-controller="dmc-form"{% if form.is_multipart %} enctype="multipart/form-data"{% endif %}>
    {% csrf_token %}
    <section class="dmc-form-page__form">
      {% material form view.layout %}
    </section>
    <section class="mdc-card__actions dmc-form-page__actions">
      <button class="mdc-button mdc-button--raised" type="submit">Save</button>
    </section>
  </form>
</div>
{% endblock content %}
